## 各コンポーネントをテストする  
関心の分離のメリットの1つは、テストのしやすさである。  
以下に、各コードモジュールをテストする方法を示す。

### ユーザーインターフェースとユーザー操作  
 Android UIのインストゥルメンテーションテストを使用します。  
 このテストを作成する場合は、`Espresso`を使用することをおすすめします。  
 フラグメントを作成し、モックの`ViewModel`を使用できます。フラグメントは、`ViewModel`とのみやり取りするため、このクラスをモックするだけでアプリのUIを十分にテストできます。  

### ViewModel  
`ViewModel`クラスは `JUnit`テストを使用してテストできます。  
`Repository`クラスをモックするだけで済みます。  

### Repository  
`Repository`も `JUnit`テストを使用してテストできます。
ただし、`Service`と`Dao`をモックする必要があります。これらのテストでは、以下の動作を確認します。
- `Repository`が`Service`の呼び出しを適切に行っている。
- `Repository`が結果を`Dao`に保存している。

### Dao
`DAO`クラスのテストにはインストゥルメンテーションテストを使用します。  
インストゥルメンテーションテストは、UIコンポーネントを必要としないため、すぐに実施できます。  
テストごとにインメモリデータベースを作成して、テストによる副作用（ディスク上のデータベースファイルの変更など）が発生しないようにしてください。  

### Service
このテストでは、バックエンドへのネットワーク呼び出しを行わないようにします。  
すべてのテスト（特にウェブベースのテスト）を外部から切り離して行うことが重要です。
`MockWebServer`などのライブラリを使用して、このテスト用の偽のローカルサーバーを作成できます。  

### 参考リンク
アプリアーキテクチャガイド  
https://developer.android.com/jetpack/guide?hl=ja
